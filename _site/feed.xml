<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Hank's Personal Blog</title>
    <description>Front-End Engineer, Runner, Web Extension developer.</description>
    <link>https://momane.com/</link>
    <atom:link href="https://momane.com/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>2021-06-20</pubDate>
    <lastBuildDate>Sun, 20 Jun 2021 13:25:14 +0200</lastBuildDate>
    <generator>Jekyll v3.8.7</generator>
    
      <item>
        <title>how to skip git hooks when committing</title>
        <description>&lt;p&gt;Well,  it’s not very recommended skipping git hooks. These hooks are often for formatting code, running tests, etc.&lt;/p&gt;

&lt;p&gt;But life happens, sometimes you want to commit something quickly or even an empty commit to the server so that you can 
trigger some CI/CD, but you have to wait for 5 min for those tests running.&lt;/p&gt;

&lt;p&gt;So if you want to skip git hooks while commting, simply run command like this:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git commit &lt;span class=&quot;nt&quot;&gt;--no-verify&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;YOUR COMMIT MESSAGE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or for short&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git commit &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;YOUR COMMIT MESSAGE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;BTW, the command to push an empty commit is&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git commit &lt;span class=&quot;nt&quot;&gt;--allow-empty&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;YOUR COMMIT MESSAGE&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Just remember only use these commands when you are really urgent and confident about your change.&lt;/p&gt;
</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/how-to-skip-git-hooks-when-committing</link>
        <guid isPermaLink="true">https://momane.com/how-to-skip-git-hooks-when-committing</guid>
        
        <category>git</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>How to fix: Enzyme expects an adapter to be configured</title>
        <description>&lt;p&gt;Working on updating a legacy React project. It’s still using React 8 and Node 7.9, I’d like to upgrate it
to the latest React and Node.&lt;/p&gt;

&lt;p&gt;The upgrading process was boring and straight forward, I just upgrade the dependencies and fix those broken changes in some
dependencies, luckily most of them do noe need any change.&lt;/p&gt;

&lt;h4 id=&quot;problem&quot;&gt;Problem&lt;/h4&gt;
&lt;p&gt;But when I run jest test, there is an error popup in almost every test file:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Enzyme Internal Error: Enzyme expects an adapter to be configured, but found none. To
configure an adapter, you should call `Enzyme.configure({ adapter: new Adapter() })` 
before using any of Enzyme's top level APIs, where `Adapter` is the adapter 
corresponding to the library currently being tested. For example:

          import Adapter from 'enzyme-adapter-react-16';
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Searched a bit, it looks like after Enzyme 3.0 and React15, you have to configure the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Adapter&lt;/code&gt; to run the tests.&lt;/p&gt;

&lt;h4 id=&quot;solution&quot;&gt;Solution&lt;/h4&gt;
&lt;p&gt;To fix it is very simple, just put these lines on the top of your test file:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import { configure } from 'enzyme';
import Adapter from 'enzyme-adapter-react-15';

configure({ adapter: new Adapter() });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;enzyme-adapter-react-15&lt;/code&gt; is also needed, you will need to use correct version per your react version.&lt;/p&gt;

&lt;p&gt;But, what if your project is very large, it has like more than 30 test files, is it mean that you will need to 
put these line on top of every of your test file?&lt;/p&gt;

&lt;p&gt;Of course no, here is what you should do.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;create a js file, name it as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jestConfig.js&lt;/code&gt; or any name you think is best. put it in any path in your 
project.&lt;/li&gt;
  &lt;li&gt;either create a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jest.config.js&lt;/code&gt; in your project root or a block in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt; file&lt;/li&gt;
  &lt;li&gt;put/append these content into it:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &quot;jest&quot;: {
    // ... other jest configrations
    &quot;setupFilesAfterEnv&quot;: [&quot;&amp;lt;rootDir&amp;gt;/path/to/your/jestConfig.js&quot;],
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that some tutorial might suggest you to do this with old Enzyme version&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &quot;jest&quot;: {
    // ... other jest configrations
    &quot;setupTestFrameworkScriptFile&quot;: &quot;&amp;lt;rootDir&amp;gt;/path/to/your/jestConfig.js&quot;
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In newer version the key has been changed from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupTestFrameworkScriptFile&lt;/code&gt; to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setupFilesAfterEnv&lt;/code&gt;, and 
you can use multiple config file since it now uses array as value.&lt;/p&gt;

&lt;h4 id=&quot;what-about-react-17&quot;&gt;what about React 17&lt;/h4&gt;

&lt;p&gt;While the most recent official &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ezyme-adapter-react&lt;/code&gt; is for 16, the 17 is not surpported yet, so if you 
are using React 17, here is another unofficial package you can use &lt;a href=&quot;https://www.npmjs.com/package/@wojtekmaj/enzyme-adapter-react-17&quot;&gt;@wojtekmaj/enzyme-adapter-react-17&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It has more than 6k downloads every week now, seems reliable.&lt;/p&gt;

</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/how-ro-fix-enzyme-expects-an-adapter-to-be-configured</link>
        <guid isPermaLink="true">https://momane.com/how-ro-fix-enzyme-expects-an-adapter-to-be-configured</guid>
        
        <category>react</category>
        
        <category>jest</category>
        
        
        <category>programming</category>
        
        <category>front-end</category>
        
      </item>
    
      <item>
        <title>为什么不要买罗技K380无线键盘</title>
        <description>&lt;p&gt;罗技K380无线键盘，被很多平台吹为几乎最佳的移动设备伴侣键盘，深受很多iPad乃至MacBook用户的欢迎。&lt;/p&gt;

&lt;p&gt;其优点有：蓝牙连接，最多可以连接三台设备，切换便捷。轻薄小巧，手感和笔记本键盘非常相似。而多色键帽更满足了不同审美用户的需求。&lt;/p&gt;

&lt;p&gt;因为有移动办公的需求，而Macbook的键盘手感实在太烂，所以前段时间我也买了一个，用了不多几次发现这是一个非常烂的键盘。&lt;/p&gt;

&lt;p&gt;手感差其实没有什么可以挑剔的，要做到轻薄小巧，必然牺牲键程和手感。&lt;/p&gt;

&lt;p&gt;但是其做工和用料却非常差，放在包里背了几次，就掉了一个键。不像其他键盘，键帽掉了以后按上去就可以了。K380的这个键帽我怎么装都装不上去。&lt;/p&gt;

&lt;p&gt;看了一下还在保修期内，就送回京东售后维修。&lt;/p&gt;

&lt;p&gt;然而京东最终给的答复是，键帽掉落属于外观损伤，不属于质量问题，拒绝保修。直接返回来了。&lt;/p&gt;

&lt;p&gt;返回后我一看，不但掉落的键没有装上去，旁边还多掉了一个键。仔细看了一下，之前掉落的键里面的卡件已经被按平，所以可以猜想是京东的售后人员先是尝试将按键按照传统方式按回去，暴力按了几下以后发现装不上，
然后又想拆旁边的键看一下结构怎么装。&lt;/p&gt;

&lt;p&gt;结果拆了以后没看出所以然来，新拆的这个键也装不回去了。就把键盘按键这种核心部件说成外观拒绝保修了。&lt;/p&gt;

&lt;p&gt;话说最近在另外一个网站看到有人的耳机罩在保修期内自动裂开，内部部件外露，送到京东也是以属于外观问题不予保修拒绝售后。&lt;/p&gt;

&lt;p&gt;不知道京东以相似的理由拒绝了多少保修。&lt;/p&gt;

&lt;p&gt;吐槽完京东，再仔细研究一下这个键盘，其剪刀脚结构是纯塑料，而且是非常脆弱的那种，稍微用点力就很容易变形乃至断掉，这个键就没用了。而键帽下面的连接件也是非常小而软的金属挂钩，很容易变形，当然也可以给掰回来，但是如果掰次数多了，就会断掉。&lt;/p&gt;

&lt;p&gt;也就是说，&lt;strong&gt;如果你的K380键帽掉了，千万不要像其他键盘那样，尝试用力将键帽按回去，不但装不回去，还有可能永久损伤键帽甚至键帽下面的连接件&lt;/strong&gt;，连接件一旦坏了，键盘就废了，除非你能接受键盘少一个键。&lt;/p&gt;

&lt;p&gt;如果损伤键帽，淘宝上有几家卖的，估计就是送修或者报废的k380拆了卖零件的。&lt;/p&gt;

&lt;p&gt;一个键帽是10块钱起，下面的剪刀脚也是10块，不包邮。卖一排键帽就能买一个新的K380。&lt;/p&gt;

&lt;p&gt;所以如果你的K380键帽坏了，不要去买键帽，上淘宝或者其他二手平台卖键帽，然后拿换来的钱买一把新的键盘。&lt;/p&gt;

&lt;p&gt;当然买新键盘千万别再买k380了。&lt;/p&gt;

</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/why-you-should-not-buy-logitech-k380-keyboard</link>
        <guid isPermaLink="true">https://momane.com/why-you-should-not-buy-logitech-k380-keyboard</guid>
        
        <category>hardware</category>
        
        <category>chinese</category>
        
        
        <category>life</category>
        
      </item>
    
      <item>
        <title>How to copy image and text to clipboard with JavaScript</title>
        <description>&lt;p&gt;I used to saw my colleague add a 30kb lib only to implement a copy function
that when the user clicks on a text, copy it to the clipboard.&lt;/p&gt;

&lt;p&gt;And I also saw someone still trying to use flash or Clipboard lib to do the same thing.&lt;/p&gt;

&lt;h4 id=&quot;here-is-how-to-copy-text-to-your-clipboard-with-javascript-with-just-several-lines-of-code-and-its-cross-browser&quot;&gt;Here is how to copy text to your clipboard with JavaScript with just several lines of code. And it’s cross-browser&lt;/h4&gt;
&lt;p&gt;and device. No need for any 3rd party lib.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;copyToClipboard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
 &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;textarea&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;//hide it&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;padding&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;border&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;outline&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;boxShadow&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;none&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;//select the text&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;focus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
 &lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;execCommand&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;removeChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it’s very simple, you just append an invisible textarea to the page, set value as the text you want to copy,
and run &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;document.execCommand('copy')&lt;/code&gt;. Then remove the textarea from the page.&lt;/p&gt;

&lt;h4 id=&quot;here-is-how-to-copy-the-image-to-your-clipboard-with-javascript&quot;&gt;here is how to copy the image to your clipboard with JavaScript&lt;/h4&gt;
&lt;p&gt;Note that this one only works on Chrome and Edge right now (2020-10)
https://caniuse.com/mdn-api_clipboarditem&lt;/p&gt;

&lt;p&gt;This requires you to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;canvas&lt;/code&gt; to port the image to blob first.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imageToBlob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;imageURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ctx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;2d&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;crossOrigin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imageURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;naturalWidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;naturalHeight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;drawImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toBlob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;blob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// here the image is a blob&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;blob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;image/png&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then use the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Clipboard&lt;/code&gt; API to do the magic&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;copyImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;imageURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;blob&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;imageToBlob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;imageURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ClipboardItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;image/png&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;blob&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;navigator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;clipboard&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Simple as that.&lt;/p&gt;
</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/how-to-copy-image-and-text-to-clipboard-with-javascript</link>
        <guid isPermaLink="true">https://momane.com/how-to-copy-image-and-text-to-clipboard-with-javascript</guid>
        
        <category>javascript</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>如何在电脑上调试手机真机网页以及微信浏览器网页</title>
        <description>&lt;p&gt;遇到个需求需要调试在微信中打开的网页。之前没有做过，搜了一圈那个所谓的在微信对话框中打开debugx5.qq.com的方法已经过时无用， 打开就显示你所使用对内核非X5内核。至于TBStool更是在2017年就已经停止更新，打开就闪退，浪费时间安装。&lt;/p&gt;

&lt;p&gt;看来因为开发人员对QQ搞出来的X5内核怨声载道，所以微信不得不妥协，弃用了X5内核作为内置浏览器内核了。&lt;/p&gt;

&lt;p&gt;至于spy-debugger等工具，我嫌麻烦也没装。&lt;/p&gt;

&lt;p&gt;找半天找不到有用的方法，好在同样的问题在手机上的Chrome里面打开也存在，于是就想先在Chrome里调试，万一能一起修复了呢。&lt;/p&gt;

&lt;p&gt;没想到就发现了Chrome调试工具居然也可以调试微信浏览器里打开的页面。看起来微信内建浏览器也采用了Chromium内核了。&lt;/p&gt;

&lt;p&gt;以下步骤同时适用于在电脑上调试手机浏览器网页调试和微信内建浏览器网页， 目前只限Android系统。iPhone还没去看。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;打开手机的开发者模式，这个各个手机打开方式都差不多，通过多次点击版本号来开启。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在开发者模式里面打开 USB 调试功能&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;把你要调试的网址发送到微信对话框里，然后点击打开&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;将手机通过USB数据线连接到电脑&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在电脑上打开Chrome浏览器&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;新建一个标签页，输入网址 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chrome://inspect/#devices&lt;/code&gt;。以前你需要在 Chrome 的开发者工具里面通过点击多个菜单来打开，Chrome现在将这个页面独立出来了，体验更佳。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;这时候你的手机应该会收到 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;允许当前连接的设备访问手机数据&lt;/code&gt; 的通知，点击允许即可&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在电脑端 Chrome 的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chrome://inspect/#devices&lt;/code&gt; 里面就应该能看到你手机 Chrome 里面打开的页面了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;同时如果你已经在微信内建浏览器里打开了网页，你应该也能看到一个名为 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;com.tencent.mm&lt;/code&gt; 的浏览器里面打开了一个页面。
&lt;img src=&quot;../img/chrome-mobile-debug-devices.png&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;点击网址下面的 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inspect&lt;/code&gt; 就可以打开调试页面，其拥有电脑端Chrome开发工具的几乎所有调试功能。
&lt;img src=&quot;../img/chrome-mobile-debug-website.png&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;不得不说发现这点还是挺惊喜的。&lt;/p&gt;

</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/debug-webpage-on-mobile-and-wechat-in-chrome</link>
        <guid isPermaLink="true">https://momane.com/debug-webpage-on-mobile-and-wechat-in-chrome</guid>
        
        <category>debugging</category>
        
        <category>mobile</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>Shout out to Jetbrains IDE</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://www.jetbrains.com/?from=one-click-extensions-manager&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;../assets/jetbrains.svg&quot; style=&quot;width:200px;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I write this post because &lt;a href=&quot;https://www.jetbrains.com/?from=one-click-extensions-manager&quot;&gt;Jetbrains&lt;/a&gt; just gave me full access to all its tools as an open source project developer.
So I just want to say thanks with this post.&lt;/p&gt;

&lt;p&gt;After I tried Webstorm for several days, I found it’s much better than VS Code.&lt;/p&gt;

&lt;p&gt;What am I saying, Webstorm is a commercial software, while VS Code is open source and free. 😅&lt;/p&gt;

&lt;p&gt;Anyway, I found myself coding much faster with Webstorm and other &lt;a href=&quot;https://www.jetbrains.com/?from=one-click-extensions-manager&quot;&gt;Jetbrains&lt;/a&gt; tools. Like, I don’t have to pick and configure all those extensions carefully to make so that it won’t popup css selector when I’m coding JavaScript. Webstorm also has built-in spell check, it’s like a life saver for non-native English speaker.&lt;/p&gt;

&lt;p&gt;Some people might think that VS code eats less RAM than Webstorm, also faster when launching.  While  my computer has 32 GB RAM and i7, so I never need to care about the RAM. Plus, if you install and enable too many extensions, you can also notice that VS Code takes a lot of RAM too.&lt;/p&gt;

&lt;p&gt;And I barely need to code some stuff within 30 sec, so the launching time is not an issue to me too. This is not mean I’m not gonna use VS Code, it’s still great, especially it can edit any programming languages, with extensions.&lt;/p&gt;

&lt;p&gt;Its price is also reasonable, for individual, most of the tools are between $59 - $69 for the first year, cheaper for the next years.&lt;/p&gt;

&lt;p&gt;It also has many free plans, students, teachers, etc. If you are an active open source developer, you can even ask for a free license.&lt;/p&gt;

&lt;p&gt;Like me, since I have this small open source project &lt;a href=&quot;https://github.com/hankxdev/one-click-extensions-manager&quot;&gt;one click extensions manager&lt;/a&gt;, it has more than 30k users.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.jetbrains.com/?from=one-click-extensions-manager&quot;&gt;Jetbrains&lt;/a&gt; gives me full access to all its tools for a year, and can be re-subscribed every year.&lt;/p&gt;

&lt;p&gt;So if you also have open source project, try to apply for its license and try this great IDE :D&lt;/p&gt;

</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/shout-out-to-jetbrains-ide</link>
        <guid isPermaLink="true">https://momane.com/shout-out-to-jetbrains-ide</guid>
        
        <category>IDE</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>Use git archive to zip your source code</title>
        <description>&lt;p&gt;To zip compiled project file is easy, normally I just use &lt;a href=&quot;&quot;&gt;archivejs&lt;/a&gt;, write a small nodejs script, and then add a script in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;package.json&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;And then I need to zip the source code only. Exclude the dist folder, the huge &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node_modules&lt;/code&gt; folder and other folders.&lt;/p&gt;

&lt;p&gt;Basically just source code and exclude everything in .gitignore file.&lt;/p&gt;

&lt;p&gt;I tried to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;archivejs&lt;/code&gt;’s &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;glob&lt;/code&gt; api. Like so:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;archive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;ignore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;folder/**&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But I could not make it works, it either zip nothing or zip everything in my folder, I think it’s because the path that I set is not correct. And I don’t want to 
spend too much time on reading and exploring archivejs’s api doc.&lt;/p&gt;

&lt;p&gt;So I came to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;zip&lt;/code&gt; command in terminal. To use it is very simple, just use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-x&lt;/code&gt; to exclude file, like this&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;zip &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; output.zip directory &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\*\*&lt;/span&gt;/&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;/node_modules/&lt;span class=&quot;se&quot;&gt;\*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which is great. But the command is too long and if there are many files you want to exclude, you will need to write down them every time.&lt;/p&gt;

&lt;p&gt;At the same time I found that with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git archive&lt;/code&gt; I can do this easily. so just run&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git archive &lt;span class=&quot;nt&quot;&gt;--format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;zip HEAD &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; zipfile.zip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;it will pack all your source code into zip file, exclude everything in the .gitignore file. Super neat.&lt;/p&gt;
</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/how-to-zip-only-source-code</link>
        <guid isPermaLink="true">https://momane.com/how-to-zip-only-source-code</guid>
        
        <category>git</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>how to use jQuery with TypeScript</title>
        <description>&lt;p&gt;It’s 2020, why do you still need to use jQuery?&lt;/p&gt;

&lt;p&gt;Yeah, jQuery has 53.8k stars on Github. And still, there are more than 97% of websites are using it.&lt;/p&gt;

&lt;p&gt;Even if you don’t want to use it in your fancy project. It’s still a good choice to use it when you are building a demo, prototype, or some small side project. I mean, when you are configuring your fancy project with wepack, react/vue/angular, babel, I already have done a small page which can send request to the API and show the result on the page.&lt;/p&gt;

&lt;p&gt;Anyway, if you want to use jQuery with TypeScript. Here are the steps that you need to do.&lt;/p&gt;

&lt;h4 id=&quot;add-jquery&quot;&gt;add jquery&lt;/h4&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;yarn add jquery
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;add-jquery-types&quot;&gt;add jquery types&lt;/h3&gt;

&lt;p&gt;this will suppress VS Code complains that it can not find jquery types&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;yarn add @types/jquery
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;config-tsconfigjson-to-suppress-another-warning-message&quot;&gt;config tsconfig.json to suppress another warning message&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;can only be default-imported using the ‘allowSyntheticDefaultImports’ flagts(1259)
index.d.ts(35, 1): This module is declared with using ‘export =’, and can only be used with a default import when using the ‘allowSyntheticDefaultImports’ flag.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;goto your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tsconfig.json&lt;/code&gt; file, add one line in your the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compilerOptions&lt;/code&gt; block. if you don’t have this tsconfig file in your project’s root folder, then create one.&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nl&quot;&gt;&quot;allowSyntheticDefaultImports&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then you can use jquery in your ts file like this:&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;jquery&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ajax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;finnally&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/how-to-use-jquery-with-typescript</link>
        <guid isPermaLink="true">https://momane.com/how-to-use-jquery-with-typescript</guid>
        
        <category>TypeScript</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>用 Taro 和 Vue 写了一个微信小程序</title>
        <description>&lt;p&gt;最近尝试写微信小程序，毕竟是现在的趋势。然后发现因为入场太晚，各种轮子已经造得遍地飞了。比如这里有一个框架，出自京东，叫做Taro，它的目的是写一份代码，就可以在诸如微信、支付宝、字节跳动（它家的什么app支持小程序？）等端作为小程序运行。&lt;/p&gt;

&lt;p&gt;于是拿来试了以下。我本来只熟悉Vue的，这个Taro原生支持React，代码风格也都是React的样式。虽说现在3.0以上支持Vue了，可是要做的时候还是有一些转换成本。&lt;/p&gt;

&lt;p&gt;然后框架本身也还存在一些bug，不过一次编写，多端运行还是挺有意思的。&lt;/p&gt;

&lt;p&gt;项目地址：https://github.com/hankxdev/taro-v2ex&lt;/p&gt;

&lt;p&gt;以下内容来自README：&lt;/p&gt;

&lt;h3 id=&quot;taro--taro-ui--vue--v2ex-api-多端小程序&quot;&gt;Taro + Taro-UI + Vue + V2EX API 多端小程序&lt;/h3&gt;

&lt;p&gt;如题，这是一个使用了这几个技术的练习项目。我是第一次使用Taro和写微信小程序。Taro官方有个&lt;a href=&quot;https://taro-docs.jd.com/taro/docs/guide/&quot;&gt;渐进式教程&lt;/a&gt;，使用的也是V2EX的API。&lt;/p&gt;
&lt;h4 id=&quot;技术栈&quot;&gt;技术栈：&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/NervJS/taro&quot;&gt;Taro&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/NervJS/taro-ui&quot;&gt;Taro-UI&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://taro-ui-vue.fontend.com/&quot;&gt;Taro-ui-vue&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/igaozp/V2EX-API&quot;&gt;V2EX API&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Vue&lt;/li&gt;
  &lt;li&gt;Vuex&lt;/li&gt;
  &lt;li&gt;SCSS&lt;/li&gt;
  &lt;li&gt;Typescript&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;本地运行和测试&quot;&gt;本地运行和测试&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yarn&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yarn dev:weapp&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;因为调用了v2ex 的API，用自己的微信小程序ID的话，需要去后台设置一下域名白名单，否则 API 调用会失败。&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;比教程多了一些的是&quot;&gt;比教程多了一些的是：&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;代码完整。官方教程的代码比较零散，甚至有些跑不通。&lt;/li&gt;
  &lt;li&gt;用户详情页面和节点详情页面&lt;/li&gt;
  &lt;li&gt;全部使用真正的V2EX API 而不是使用自定义数据&lt;/li&gt;
  &lt;li&gt;自定义 Tabbar&lt;/li&gt;
  &lt;li&gt;使用了Taro-UI来做界面&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;项目存在的问题&quot;&gt;项目存在的问题：&lt;/h4&gt;
&lt;p&gt;以下是我知道的主要问题。大佬们如果发现新问题或者知道这些问题的答案，欢迎提 issues 或者 PR， 望不吝赐教。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;几个页面在切换的时候并不会刷新。这里怀疑是Taro的bug，文档中写的 &lt;a href=&quot;https://nervjs.github.io/taro/docs/vue/#onshow-1&quot;&gt;onShow&lt;/a&gt; 方法并不能在页面显示的时候被成功调用。&lt;/li&gt;
  &lt;li&gt;不怎么好看。因为主要用来熟悉Taro以及微信小程序和多端小程序开发，因此并未在界面上花功夫，几乎没有怎么写样式。使用的全都是Taro-UI 默认的组件。&lt;/li&gt;
  &lt;li&gt;有点卡。一方面v2ex并未提供分页的API。有些 endpoints 诸如获得节点列表、帖子列表等，都是一大堆上千条数据一下子全返回。网络慢的时候导致卡顿更加明显。&lt;/li&gt;
  &lt;li&gt;TypeScript 使用并不规范。我很少写 TypeScript。也一直懒得学，因此基本上都是用JavaScript 的写法在写 TypeScript。同样，写好或者学习 TypeScript 也并不是我写本项目的目的。略过。&lt;/li&gt;
  &lt;li&gt;CustomTabBar 的实现并不规范。现在的做法是写一个 CustomTabBar, 然后放置进每个页面中。正确的做法应该是。
    &lt;ol&gt;
      &lt;li&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;app.config.ts&lt;/code&gt; 中的&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tabList&lt;/code&gt; 里，设置 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;custom: true&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;src&lt;/code&gt; 目录下新建 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;custome-tab-bar&lt;/code&gt; 文件夹&lt;/li&gt;
      &lt;li&gt;在 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;custome-tab-bar&lt;/code&gt; 下面添加 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.js&lt;/code&gt;,&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.wxml&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.wxss&lt;/code&gt; 来自定义 tabbar 的样式和行为。 需要注意的是，这里不能直接写 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.vue&lt;/code&gt;，编译不出来的。&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://github.com/hankxdev/taro-v2ex/raw/master/readme/hot.png&quot; alt=&quot;hot&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/a-wechat-mini-app-with-taro-vue</link>
        <guid isPermaLink="true">https://momane.com/a-wechat-mini-app-with-taro-vue</guid>
        
        <category>wechat</category>
        
        
        <category>programming</category>
        
      </item>
    
      <item>
        <title>How to fix Git show all file as modified in WSL</title>
        <description>&lt;h2 id=&quot;solution&quot;&gt;Solution&lt;/h2&gt;
&lt;p&gt;If you open your code in Windows, and run git in WSL bash, you will have a big chance to meet an issue that &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt; shows all your
file get modified.
To fix the issue, run this in WSL bash:&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git config &lt;span class=&quot;nt&quot;&gt;--global&lt;/span&gt; core.autocrlf &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Normally I use OSX, but today I have to go back to my Windows PC to try an extension on Edge.&lt;/p&gt;

&lt;p&gt;I’m using WSL (that’s Windows Subsystem for Linux) to manage and build my projects.&lt;/p&gt;

&lt;p&gt;After I cloned my repo from Github, I tried to create a new branch for Edge version. But after I ran &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git branch branchname&lt;/code&gt;
, it told me that there were changes need to commit first.&lt;/p&gt;

&lt;p&gt;So I ran &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git status&lt;/code&gt;, to check what’s been changed. Then I got this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;../img/wsl-change-all.png&quot; alt=&quot;all files modified&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This was a simple app. so it’s basically showing that every file got modified. But I hadn’t do anything to any file.&lt;/p&gt;

&lt;p&gt;It’s because I was using git in WSL, but I opened files in Windows system. So the line ending is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CRLF&lt;/code&gt;, but git thought it’s on Linux so the 
line should ends with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LF&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;So the fix command will tell git to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CRLF&lt;/code&gt; and line ending.&lt;/p&gt;
</description>
        <pubDate>2021-06-20</pubDate>
        <link>https://momane.com/how-to-fix-git-show-all-file-as-modified-in-wsl</link>
        <guid isPermaLink="true">https://momane.com/how-to-fix-git-show-all-file-as-modified-in-wsl</guid>
        
        <category>windows</category>
        
        <category>ubuntu</category>
        
        <category>wsl</category>
        
        
        <category>system</category>
        
      </item>
    
  </channel>
</rss>
